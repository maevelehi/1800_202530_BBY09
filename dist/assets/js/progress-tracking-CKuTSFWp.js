import"./app-CXlX1-3S.js";import{c as m,e as y,b as g,q as f,f as D,w as p,h}from"./site-navbar-BP1Fahk2.js";import"./site-footer-NVLaG4U0.js";import"./main-l0sNRNKZ.js";document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("backBtnProgress");e&&e.addEventListener("click",n=>{n.preventDefault(),window.history.back()})});m(async e=>{e&&await E(e.uid)});async function k(e){const n=y(g,"flipLogs"),t=f(n,p("uid","==",e),D("timestamp","asc"));return(await h(t)).docs.map(a=>({id:a.id,...a.data()}))}function w(e){const n=new Date,t=new Date(n);t.setDate(n.getDate()-6);const c=Array.from({length:7},(s,o)=>{const r=new Date(t);return r.setDate(t.getDate()+o),r.toDateString()}),a=Array(7).fill(0);return e.forEach(s=>{const o=s.timestamp?.toDate?s.timestamp.toDate():new Date(s.timestamp);if(!o)return;const r=c.findIndex(i=>new Date(i).toDateString()===o.toDateString());r!==-1&&(a[r]+=1)}),a}function b(e){const n=Array.from(document.querySelectorAll(".chart-column")),t=Math.max(...e,1);n.forEach((i,d)=>{const l=e[d]/t*100;i.style.height=l+"%";const u=i.querySelector("span");u&&(u.textContent=e[d]),i.classList.toggle("today",d===6)});const c=e[6],a=Math.round(e.reduce((i,d)=>i+d,0)/7);document.getElementById("today-count").textContent=c,document.getElementById("average-count").textContent=a;const s=a?Math.round((c-a)/a*100):0,o=s>=0,r=o?"â­":"âš ï¸";document.getElementById("weekly-stats").textContent=`${r} Youâ€™re ${Math.abs(s)}% ${o?"above":"below"} your weekly average!`}function S(){const e=new Date,n=new Date(e);n.setDate(e.getDate()-6);const t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],c=Array.from({length:7},(s,o)=>{const r=new Date(n);return r.setDate(n.getDate()+o),t[r.getDay()]});document.querySelectorAll(".chart-days div").forEach((s,o)=>{s.textContent=c[o]})}function v(e){let n=0;for(let t=6;t>=0&&e[t]>0;t--)n++;return n}function x(e){const n=v(e);document.getElementById("streak-count").textContent=`ðŸ”¥ ${n}-Day Streak!`,document.getElementById("streak-msg").textContent=n>0?"Keep going, consistency is key!":"Start today and build your streak!";const t=document.querySelector(".streak-card img");t&&(n>=5?(t.src="images/study.png",t.alt="You've been unstoppable!"):n>=4?(t.src="images/aladin.png",t.alt="Good streak!"):n>=3?(t.src="images/research.png",t.alt="Good streak!"):n>=2?(t.src="images/mountain.png",t.alt="Good streak!"):(t.src="images/graph.png",t.alt="Start your streak!"))}async function E(e){const n=await k(e),t=w(n);b(t),x(t),S()}
