import"./app-D-chPbn8.js";import{c as g,e as f,b as D,q as p,f as h,w as k,h as w}from"./site-navbar-CJE8ti2D.js";import"./site-footer-C7ShoOr8.js";import"./main-CDlNrMfc.js";document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("backBtnProgress");e&&e.addEventListener("click",n=>{n.preventDefault(),window.history.back()})});g(async e=>{e&&await A(e.uid)});async function b(e){const n=f(D,"flipLogs"),t=p(n,k("uid","==",e),h("timestamp","asc"));return(await w(t)).docs.map(s=>({id:s.id,...s.data()}))}function S(e){const n=new Date,t=new Date(n);t.setDate(n.getDate()-6);const c=Array.from({length:7},(r,a)=>{const o=new Date(t);return o.setDate(t.getDate()+a),o.toDateString()}),s=Array(7).fill(0);return e.forEach(r=>{const a=r.timestamp?.toDate?r.timestamp.toDate():new Date(r.timestamp);if(!a)return;const o=c.findIndex(u=>new Date(u).toDateString()===a.toDateString());o!==-1&&(s[o]+=1)}),s}function v(e){const n=Array.from(document.querySelectorAll(".chart-column")),t=Math.max(...e,1);n.forEach((i,d)=>{const y=e[d]/t*100;i.style.height=y+"%";const l=i.querySelector("span");l&&(l.textContent=e[d]),i.classList.toggle("today",d===6)});const c=e[6],s=e.filter(i=>i>0),r=s.length||1,a=Math.round(s.reduce((i,d)=>i+d,0)/r);document.getElementById("today-count").textContent=c,document.getElementById("average-count").textContent=a;const o=a?Math.round((c-a)/a*100):0,u=o>=0,m=u?"â­":"âš ï¸";document.getElementById("weekly-stats").textContent=`${m} Youâ€™re ${Math.abs(o)}% ${u?"above":"below"} your daily average!`}function x(){const e=new Date,n=new Date(e);n.setDate(e.getDate()-6);const t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],c=Array.from({length:7},(r,a)=>{const o=new Date(n);return o.setDate(n.getDate()+a),t[o.getDay()]});document.querySelectorAll(".chart-days div").forEach((r,a)=>{r.textContent=c[a]})}function C(e){let n=0;for(let t=6;t>=0&&e[t]>0;t--)n++;return n}function E(e){const n=C(e);document.getElementById("streak-count").textContent=`ðŸ”¥ ${n}-Day Streak!`,document.getElementById("streak-msg").textContent=n>0?"Keep going, consistency is key!":"Start today and build your streak!";const t=document.querySelector(".streak-card img");t&&(n>=5?(t.src="images/study.png",t.alt="You've been unstoppable!"):n>=4?(t.src="images/aladin.png",t.alt="Good streak!"):n>=3?(t.src="images/research.png",t.alt="Good streak!"):n>=2?(t.src="images/mountain.png",t.alt="Good streak!"):(t.src="images/graph.png",t.alt="Start your streak!"))}async function A(e){const n=await b(e),t=S(n);v(t),E(t),x()}
