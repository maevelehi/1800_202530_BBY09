<!DOCTYPE html>
<html lang="en">
  <head>
    <title>FlipIt</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script type="module" src="/src/components/site-navbar.js"></script>
    <script type="module" src="./src/addcard.js"></script>
    <link rel="stylesheet" href="./src/styles/home.css" />
    <!-- footer icon link  -->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>

  <body class="d-flex flex-column min-vh-100">
    <site-navbar></site-navbar>

    <div class="main-container flex-fill pb-5">
      <div class="content-wrapper">
        <div class="top-info-grid">
          <div class="deck-info">
            <h1 class="page-title">Home</h1>

            <!-- NEW DASHBOARD CARDS -->
              <div class="row g-3 mt-2">
                <div class="col-6">
                  <div class="card text-center p-3 card-total border-0">
                    <h2 id="totalCards" class="fw-bold mb-1">0</h2>
                    <p class="text-muted mb-0">Total Cards</p>
                  </div>
                </div>

                <div class="col-6">
                  <div
                    class="card text-center p-3 shadow-sm card-studied border-0"
                  >
                    <h2 id="studiedToday" class="fw-bold mb-1">0</h2>
                    <p class="text-muted mb-0">Studied Cards</p>
                  </div>
                </div>
              </div>

            <!-- END DASHBOARD CARDS -->
          </div>

          <div class="filter-dropdown-container">
            <button
              class="btn filter-toggle-btn"
              type="button"
              id="filterToggle"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <span class="material-icons">filter_list</span>
              Filter
            </button>
            <div class="dropdown-menu filter-dropdown-menu p-3">
              <div class="filter-content">
                <h6 class="filter-title">Filter Cards</h6>
                <div class="filter-controls">
                  <div class="mb-3">
                    <label for="topicFilter" class="form-label">Topic</label>
                    <select id="topicFilter" class="form-select filter-select">
                      <option value="">Select Topic</option>
                    </select>
                  </div>
                  <div class="mb-3">
                    <label for="chapterFilter" class="form-label">Chapter</label>
                    <select id="chapterFilter" class="form-select filter-select" disabled>
                      <option value="">Select Chapter</option>
                    </select>
                  </div>
                  <div class="filter-actions">
                    <button id="clearFilter" class="btn btn-outline-secondary btn-sm">
                      Clear Filter
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Move dropdown here and add positioning class -->
          <div class="drop-down">
              <button
                class="btn dropdown-toggle add-card-btn"
                type="button"
                id="dropdownMenu"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Add cards
              </button>
              <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
                <li>
                  <button
                    class="dropdown-item"
                    type="button"
                    id="addCardsManually"
                    data-action="add-cards"
                  >
                    Add cards manually
                  </button>
                </li>
                <li>
                  <button
                    class="dropdown-item"
                    type="button"
                    id="uploadCsv"
                    data-action="upload-csv"
                  >
                    Upload CSV file
                  </button>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <div class="questions-list" id="cards-go-here"></div>

        <template id="cardTemplate">
          <div class="question-card">
            <div class="chapter-label">
              Chapter <span class="chapter-num"></span>
            </div>

            <p class="question-text"></p>

            <button class="flip-btn">Flip</button>

            <p class="answer-text" style="display: none;"></p>

            <img src="./images/removeIcon.png" alt="Remove" class="remove-btn" />
          </div>
        </template>
      </div>
    </div>

    <input type="file" id="csvFileInput" accept=".csv" style="display: none" />

    <site-footer></site-footer>

    <script type="module" src="/src/components/site-footer.js"></script>
    <script type="module" src="/src/main.js"></script>
    <script type="module" src="/src/firebaseConfig.js"></script>
    <script type="module" src="/src/authentication.js"></script>
    <script type="module" src="/src/loginSignup.js"></script>
    <script type="module" src="./src/csvUpload.js"></script>
    <script type="module" src="/src/app.js"></script>
    <script type="module" src="./src/searchFilter.js"></script>
    <script type="module" src="./src/userprofilepicture.js"></script>
  </body>
</html>